{% extends "base.html" %}

{% block title %}Company Information - Admin Dashboard{% endblock %}

{% block extra_styles %}
<style>
    .company-info-section {
        background: var(--white);
        padding: 2rem;
        border-radius: 12px;
        border: 1px solid var(--border-color);
        margin-bottom: 2rem;
    }
    
    .company-info-section h3 {
        color: var(--accent-green);
        margin-bottom: 1rem;
        padding-bottom: 0.5rem;
        border-bottom: 2px solid var(--border-color);
        font-size: 1.3rem;
    }
    
    .form-group {
        margin-bottom: 1.5rem;
    }
    
    .form-group label {
        display: block;
        font-weight: 600;
        margin-bottom: 0.5rem;
        color: var(--text-primary);
    }
    
    .form-group textarea {
        width: 100%;
        min-height: 100px;
        padding: 0.75rem;
        border: 2px solid var(--border-color);
        border-radius: 8px;
        font-family: inherit;
        font-size: 1rem;
        resize: vertical;
    }
    
    .form-group input[type="text"] {
        width: 100%;
        padding: 0.75rem;
        border: 2px solid var(--border-color);
        border-radius: 8px;
        font-family: inherit;
        font-size: 1rem;
    }
    
    .form-group input[type="text"]:focus,
    .form-group textarea:focus {
        outline: none;
        border-color: var(--accent-green);
        box-shadow: 0 0 0 3px rgba(190, 255, 63, 0.1);
    }
    
    .help-text {
        font-size: 0.9rem;
        color: var(--text-secondary);
        margin-top: 0.3rem;
        font-style: italic;
    }
    
    .submit-button {
        background: var(--accent-green);
        color: var(--accent-dark);
        padding: 0.75rem 2rem;
        border: none;
        border-radius: 20px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
    }
    
    .submit-button:hover {
        background: #A8E71F;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(190, 255, 63, 0.3);
    }
    
    .info-box {
        background: #E3F2FD;
        border-left: 4px solid #1976D2;
        padding: 1rem;
        border-radius: 6px;
        margin-bottom: 2rem;
        color: #1565C0;
    }
    
    .info-box strong {
        display: block;
        margin-bottom: 0.5rem;
    }
    
    .preview-section {
        background: var(--card-bg);
        padding: 1.5rem;
        border-radius: 8px;
        margin-top: 2rem;
        border: 1px solid var(--border-color);
    }
    
    .preview-section h4 {
        color: var(--text-primary);
        margin-bottom: 1rem;
    }
    
    .preview-content {
        background: var(--white);
        padding: 1rem;
        border-radius: 6px;
        font-size: 0.95rem;
        line-height: 1.6;
        color: var(--text-primary);
        white-space: pre-wrap;
        word-wrap: break-word;
    }
</style>
{% endblock %}

{% block content %}
<div class="container">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
        <h1 style="color: var(--text-primary);">Company Knowledge Base</h1>
        <a href="{{ url_for('admin_dashboard') }}" class="btn btn-secondary">‚Üê Back to Admin</a>
    </div>
    
    <!-- Info Box -->
    <div class="info-box">
        <strong>üìö About Company Knowledge Base</strong>
        <p>Add information about your company here. This knowledge will be automatically included when the AI answers questions about your company. The more detailed and accurate you are, the better the AI responses will be.</p>
    </div>
    
    <!-- Company Info Form -->
    <form method="POST" action="{{ url_for('manage_company_info') }}">
        <!-- Basic Information -->
        <div class="company-info-section">
            <h3>üè¢ Basic Information</h3>
            
            <div class="form-group">
                <label for="company_name">Company Name *</label>
                <input type="text" id="company_name" name="company_name" 
                       value="{{ company_info.company_name or '' }}" required 
                       placeholder="e.g., Acme Corporation">
                <div class="help-text">The official name of your company</div>
            </div>
            
            <div class="form-group">
                <label for="industry">Industry</label>
                <input type="text" id="industry" name="industry" 
                       value="{{ company_info.industry or '' }}" 
                       placeholder="e.g., Technology, Healthcare, Finance">
                <div class="help-text">What industry or sector does your company operate in?</div>
            </div>
            
            <div class="form-group">
                <label for="website">Website</label>
                <input type="text" id="website" name="website" 
                       value="{{ company_info.website or '' }}" 
                       placeholder="e.g., https://www.example.com">
                <div class="help-text">Your company's official website URL</div>
            </div>
        </div>
        
        <!-- About & Description -->
        <div class="company-info-section">
            <h3>üìñ About Your Company</h3>
            
            <div class="form-group">
                <label for="company_description">Company Description</label>
                <textarea id="company_description" name="company_description" 
                          placeholder="A brief description of what your company does...">{{ company_info.company_description or '' }}</textarea>
                <div class="help-text">2-3 sentences describing your company's main business</div>
            </div>
            
            <div class="form-group">
                <label for="about_company">About Us / Mission</label>
                <textarea id="about_company" name="about_company" 
                          placeholder="Tell us about your company's mission, vision, and values...">{{ company_info.about_company or '' }}</textarea>
                <div class="help-text">Your company's mission statement, vision, values, and history</div>
            </div>
        </div>
        
        <!-- Products & Services -->
        <div class="company-info-section">
            <h3>üõçÔ∏è Products & Services</h3>
            
            <div class="form-group">
                <label for="products_services">Products & Services</label>
                <textarea id="products_services" name="products_services" 
                          placeholder="List and describe your main products or services...">{{ company_info.products_services or '' }}</textarea>
                <div class="help-text">Detailed information about what your company offers. Include features, benefits, pricing if relevant.</div>
            </div>
        </div>
        
        <!-- Team & Culture -->
        <div class="company-info-section">
            <h3>üë• Team & Culture</h3>
            
            <div class="form-group">
                <label for="team_info">Team Information</label>
                <textarea id="team_info" name="team_info" 
                          placeholder="Describe your team, leadership, key personnel...">{{ company_info.team_info or '' }}</textarea>
                <div class="help-text">Information about your team size, departments, key team members, and structure</div>
            </div>
            
            <div class="form-group">
                <label for="company_culture">Company Culture</label>
                <textarea id="company_culture" name="company_culture" 
                          placeholder="Describe your company culture, values, work environment...">{{ company_info.company_culture or '' }}</textarea>
                <div class="help-text">Your company's culture, work environment, values, and employee benefits</div>
            </div>
        </div>
        
        <!-- Contact & Additional Info -->
        <div class="company-info-section">
            <h3>üìû Contact & Additional Info</h3>
            
            <div class="form-group">
                <label for="contact_info">Contact Information</label>
                <textarea id="contact_info" name="contact_info" 
                          placeholder="Address, phone, email, locations...">{{ company_info.contact_info or '' }}</textarea>
                <div class="help-text">Your company's contact details, office locations, support channels</div>
            </div>
            
            <div class="form-group">
                <label for="custom_knowledge">Additional Knowledge / FAQ</label>
                <textarea id="custom_knowledge" name="custom_knowledge" 
                          placeholder="Any other important information, FAQs, policies...">{{ company_info.custom_knowledge or '' }}</textarea>
                <div class="help-text">Any other important information, policies, or frequently asked questions about your company</div>
            </div>
        </div>
        
        <!-- Submit Button -->
        <div style="display: flex; gap: 1rem; margin-top: 2rem;">
            <button type="submit" class="submit-button">üíæ Save Company Knowledge</button>
            <a href="{{ url_for('admin_dashboard') }}" class="btn btn-secondary">Cancel</a>
        </div>
    </form>
    
    <!-- Preview Section -->
    {% if company_info and company_info.company_name %}
    <div class="preview-section">
        <h4>üìã How Your Company Knowledge Looks to AI</h4>
        <p style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 1rem;">
            This is how the AI will see your company information when answering questions:
        </p>
        <div class="preview-content">
{{ company_info.get_full_knowledge() }}
        </div>
    </div>
    {% endif %}
    
    <!-- Tips Section -->
    <div class="card" style="margin-top: 2rem; background: #FFFACD; border-left: 4px solid #FFD700;">
        <h4 style="color: #F57F17; margin-bottom: 1rem;">üí° Tips for Best Results</h4>
        <ul style="margin-left: 1.5rem; color: var(--text-primary); line-height: 1.8;">
            <li><strong>Be Specific:</strong> The more detailed your information, the more accurate the AI's responses</li>
            <li><strong>Keep Updated:</strong> Regularly update this information as your company evolves</li>
            <li><strong>Include Details:</strong> Add specific features, benefits, team members, and processes</li>
            <li><strong>Use Clear Language:</strong> Write in a way that's easy to understand</li>
            <li><strong>Cover All Aspects:</strong> Fill in as many sections as possible for comprehensive knowledge</li>
            <li><strong>Test It:</strong> Ask the AI questions about your company and see if answers are accurate</li>
        </ul>
    </div>
</div>

<script>
    // Auto-save indicator
    const form = document.querySelector('form');
    if (form) {
        form.addEventListener('change', function() {
            console.log('Form changed - ready to save');
        });
    }
</script>
{% endblock %}